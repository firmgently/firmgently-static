{#

  NOTE -
  some data (eg sitedata{}) is imported from config.json by metalsmith-data
  (see build.json)
  
#}
{#
#}
{% macro createItem(item) %}
<a class="homeImageMain boxRight" href="/{{ item.path | stripIndexFromPath }}">
{% if item.itemData %} {# standard item #}
	<figure>
		<img src="/images/shim.png" style="background-image: url('/images/items/main/{{ item.itemData.id }}.jpg')" />
		<figcaption>
			{%- if item.itemData.client -%}
        {% set details = item.itemData.client + " / " + item.itemData.year %}
			{%- else -%}
        {% set details = item.itemData.w + "x" + item.itemData.h + "cm / " + item.itemData.materials + " / " + item.itemData.year %}
			{%- endif -%}
      <h2>{{ item.itemData.title }}</h2><em>{{ details }}</em>
		</figcaption>
  </figure>
{% else %} {# post #}
      <h2>{{ item.title }}</h2><em>{{ item.excerpt | safe }}</em>
{% endif %}
</a>
{% endmacro %}
{#
#}
{% set pageTitle = (itemData.title | default(title) | default(sitedata.site_name)) + sitedata.title_suffix %}
{% set pageTitle_stripped = pageTitle | striptags %}
{% set pageTitle_urlEncoded = pageTitle_stripped | urlencode %}
{% set desc = itemData.desc | default(desc) | default(sitedata.site_desc) %}
{% set desc_stripped = desc | striptags %}
{% set share_thumbnail = itemData.share_thumbnail | default(share_thumbnail) | default(sitedata.share_thumbnail) %}
{% set url = sitedata.domain + "/" + path %}
{#
#}
<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://ogp.me/ns#" xmlns:fb="http://www.facebook.com/2008/fbml" xmlns:firmgently="{{ sitedata.domain }}/ns#">

<head>
  <meta charset="utf-8">
 
  <meta name="title" content="{{ pageTitle_stripped }}">
  <meta name="description" content="{{ desc_stripped }}">
  <meta name="robots" content="noodp,noydir">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta property="og:title" content="{{ pageTitle_stripped }}">
  <meta property="og:type" content="{{ og_type }}">
  <meta property="og:url" content="{{ url }}">
  <meta property="og:image" content="{{ sitedata.domain }}/images/{{ share_thumbnail }}">
  <meta property="og:site_name" content="{{ sitedata.site_name }}">
  <meta property="og:description" content="{{ desc_stripped }}">

  <title>{{ pageTitle }}</title>

  <link rel="shortcut icon" href="{{ sitedata.favicon }}">
  <link rel="image_src" href="{{ sitedata.domain }}/images/{{ share_thumbnail }}">

  {% block extraCSS %}{% endblock %}
</head>


<body{% if bodyClass %} class="{{ bodyClass }}"{% endif %}>
  <div id="bodyWrapper">
    <div id="main">

      {#
        fontsizeFromTagWeight() filter:
        weight of tag is piped in as the first parameter
        bracket params are (minSize, maxSize, numSizes)
        minSize, maxSize represent min/max values that can be returned
        numSizes is how many different sizes will be available
      #}
      <header id="fg-header">
        <a id="titleImage" alt="{{ sitedata.simple_domain }}" title="{{ sitedata.simple_domain }}" href="/">{{ sitedata.simple_domain }}</a>
        <nav id="fg-nav-main">
          <ul>
{%- for word in cloud -%}
    
  {%- if word.ctg %}

    {% set matchFound = false %}

    {%- if (word.ctg == tag) %}
      {% set matchFound = true %}
    {% endif %}

    {%- if (itemData and (itemData.tags.indexOf(word.ctg) != -1)) %}
      {% set matchFound = true %}
    {% endif %}

    {% if tags %}
      {% for tag in tags %}
        {% if tag.name == word.ctg %}
          {% set matchFound = true %}
        {% endif %}
      {% endfor %}
    {% endif %}
 
    {%- if matchFound %}
      {% set classattr = "class=\"selected\" " %}
    {% else %}
      {% set classattr = "" %}
    {% endif %}
   
    <li><a {{ classattr | safe }}style="font-size: {{ word.wght | fontsizeFromTagWeight(0.8, 2, 60) }}rem" href="{{ word.pth }}">{{ word.ctg }}</a></li>
 
  {% endif %}

{%- endfor %}
         </ul>
        </nav>
      </header>
      
      
      <section {% if microdata_type %}itemscope itemtype="{{ microdata_type }}" {% endif %}id="content" class="row col">
			{% block main %}{{ contents | safe }}{% endblock %}
			</section><!-- content -->


      <ul id="socialImageButtons">
        <li><img src="/images/yin-yang.svg" alt="Yin Yang symbol" class="icon"></li>
      </ul>

    </div><!-- main -->
    
  </div><!-- bodyWrapper -->


  <footer class="fgfooter row">
    <span class="footerLeft col">
      <ul>
        <li><img src="/images/yin-yang.svg" alt="Yin Yang symbol" class="icon"></li>
        <li><img src="/images/feed-icon.svg" alt="RSS Feed symbol" class="icon"></li>
      </ul>
      <span class="footerMid col">Content and site&nbsp;<span class="copyright">&copy;</span>&nbsp;Mark Mayes</span>
    </span>
    <span class="footerRight col">{{ sitedata.footer_quote | safe }}</span>
  </footer>
  
  {% block bodyEndScripts %}{% endblock %}

  {% block analytics %}{% endblock %}
  
</body>


</html>
